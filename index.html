<!DOCTYPE html>
<html>
<head>
    <title>Show the Local Weather
    </title>
    <meta charset="UTF-8" />
    <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-beta.2/css/bootstrap.css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css" />
</head>
<body onload="geoFindMe()">
    <div class="container text-center">

      <h1>Show the Local Weather</h1>
      <h2 id="city"></h2>
      <h3 id="degree"></h3>
      <h3 id="description"></h3>

      <img id="img" src=""/>

      <h4 id="out"><h4>
      </div>

      <script type="text/javascript">



        function geoFindMe() {
          var output = document.getElementById("out");

          if (!navigator.geolocation){
            output.innerHTML = "<p>Geolocation is not supported by your browser</p>";
            return;
        }

        function success(position) {

            var latitude  = position.coords.latitude;
            var longitude = position.coords.longitude;


            $.ajax({
               type: "GET",
               url: 'https://fcc-weather-api.glitch.me/api/current?lat='+latitude+'&lon='+longitude,
               success: function(result)
               {
                console.log(result);
                   var celsius=result.main.temp;

                   document.getElementById("city").innerHTML =result.name+" "+result.sys.country;
                   document.getElementById("degree").innerHTML =Math.round(celsius)+" &deg;<a id='changetemp' href='#'>C</a>";
                   document.getElementById("description").innerHTML=result.weather["0"].main;
                   $("#img").attr("src",result.weather[0].icon);

                   $(document).on("click","#changetemp",function () {



                      if($(this).text() == "C" ) {

                        $('#degree').html(Math.round(celsius* 9 / 5 + 32)+" &deg;<a id='changetemp' href='#'>F</a>");

                    }
                    else $('#degree').html(Math.round(celsius)+" &deg;<a id='changetemp' href='#'>C</a>");

                });
               }

           });

        }

        function error() {
            output.innerHTML = "Unable to retrieve your location";
        }



        navigator.geolocation.getCurrentPosition(success, error);
    }

</script>
</body>
</html>